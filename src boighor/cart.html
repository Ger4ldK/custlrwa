<!doctype html>
<html class="no-js" lang="zxx">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Shopping Cart | FITTR</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Favicons -->
	<link rel="shortcut icon" href="images/yellowicon.png">
	<link rel="apple-touch-icon" href="images/icon.png">

	<!-- Google font (font-family: 'Roboto', sans-serif; Poppins ; Satisfy) -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet"> 
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,500,600,600i,700,700i,800" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/plugins.css">
	<link rel="stylesheet" href="style.css">

	<!-- Cusom css -->
   <link rel="stylesheet" href="css/custom.css">

	<!-- Modernizer js -->
	<script src="js/vendor/modernizr-3.5.0.min.js"></script>
</head>
<body>
	<!--[if lte IE 9]>
		<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
	<![endif]-->

	<!-- Main wrapper -->
	<div class="wrapper" id="wrapper">
		
		<!-- Header -->
		<header id="wn__header" class="oth-page header__area header__absolute sticky__header">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-4 col-sm-4 col-7 col-lg-2">
						<div class="logo">
							<a href="index.html">
								<img src="images/logo/yellow1.png" alt="logo images">
							</a>
						</div>
					</div>
					<div class="col-lg-8 d-none d-lg-block">
						<nav class="mainmenu__nav">
							<ul class="meninmenu d-flex justify-content-start">
								<li class="drop with--one--item"><a href="index.html">Home</a></li>
								<li class="drop"><a href="#">Shop</a>
									<div class="megamenu mega03">
										<ul class="item item03">
											<li class="title">Shop Layout</li>
											<li><a href="shop-grid.html">Shop Grid</a></li>
											<li><a href="single-product.html">Single Product</a></li>
										</ul>
										<ul class="item item03">
											<li class="title">Shop Page</li>
											<li><a href="my-account.html">My Account</a></li>
											<li><a href="cart.html">Cart Page</a></li>
											<li><a href="checkout.html">Checkout Page</a></li>
											<li><a href="wishlist.html">Wishlist Page</a></li>
											<li><a href="error404.html">404 Page</a></li>
											<li><a href="faq.html">Faq Page</a></li>
										</ul>
										<ul class="item item03">
											<li class="title">Bargain Books</li>
											<li><a href="shop-grid.html">Bargain Bestsellers</a></li>
											<li><a href="shop-grid.html">Activity Kits</a></li>
											<li><a href="shop-grid.html">B&N Classics</a></li>
											<li><a href="shop-grid.html">Books Under $5</a></li>
											<li><a href="shop-grid.html">Bargain Books</a></li>
										</ul>
									</div>
								</li>
								<li class="drop"><a href="shop-grid.html">Books</a>
									<div class="megamenu mega03">
										<ul class="item item03">
											<li class="title">Categories</li>
											<li><a href="shop-grid.html">Biography </a></li>
											<li><a href="shop-grid.html">Business </a></li>
											<li><a href="shop-grid.html">Cookbooks </a></li>
											<li><a href="shop-grid.html">Health & Fitness </a></li>
											<li><a href="shop-grid.html">History </a></li>
										</ul>
										<ul class="item item03">
											<li class="title">Customer Favourite</li>
											<li><a href="shop-grid.html">Mystery</a></li>
											<li><a href="shop-grid.html">Religion & Inspiration</a></li>
											<li><a href="shop-grid.html">Romance</a></li>
											<li><a href="shop-grid.html">Fiction/Fantasy</a></li>
											<li><a href="shop-grid.html">Sleeveless</a></li>
										</ul>
										<ul class="item item03">
											<li class="title">Collections</li>
											<li><a href="shop-grid.html">Science </a></li>
											<li><a href="shop-grid.html">Fiction/Fantasy</a></li>
											<li><a href="shop-grid.html">Self-Improvemen</a></li>
											<li><a href="shop-grid.html">Home & Garden</a></li>
											<li><a href="shop-grid.html">Humor Books</a></li>
										</ul>
									</div>
								</li>
								<li class="drop"><a href="shop-grid.html">Kids</a>
									<div class="megamenu mega02">
										<ul class="item item02">
											<li class="title">Top Collections</li>
											<li><a href="shop-grid.html">American Girl</a></li>
											<li><a href="shop-grid.html">Diary Wimpy Kid</a></li>
											<li><a href="shop-grid.html">Finding Dory</a></li>
											<li><a href="shop-grid.html">Harry Potter</a></li>
											<li><a href="shop-grid.html">Land of Stories</a></li>
										</ul>
										<ul class="item item02">
											<li class="title">More For Kids</li>
											<li><a href="shop-grid.html">B&N Educators</a></li>
											<li><a href="shop-grid.html">B&N Kids' Club</a></li>
											<li><a href="shop-grid.html">Kids' Music</a></li>
											<li><a href="shop-grid.html">Toys & Games</a></li>
											<li><a href="shop-grid.html">Hoodies</a></li>
										</ul>
									</div>
								</li>
								<li class="drop"><a href="#">Pages</a>
									<div class="megamenu dropdown">
										<ul class="item item01">
											<li><a href="about.html">About Page</a></li>
											<li class="label2"><a href="portfolio.html">Portfolio</a>
												<ul>
													<li><a href="portfolio.html">Portfolio</a></li>
													<li><a href="portfolio-details.html">Portfolio Details</a></li>
												</ul>
											</li>
											<li><a href="my-account.html">My Account</a></li>
											<li><a href="cart.html">Cart Page</a></li>
											<li><a href="checkout.html">Checkout Page</a></li>
											<li><a href="wishlist.html">Wishlist Page</a></li>
											<li><a href="error404.html">404 Page</a></li>
											<li><a href="faq.html">Faq Page</a></li>
											<li><a href="team.html">Team Page</a></li>
										</ul>
									</div>
								</li>
								<li class="drop"><a href="blog.html">Blog</a>
									<div class="megamenu dropdown">
										<ul class="item item01">
											<li><a href="blog.html">Blog Page</a></li>
											<li><a href="blog-details.html">Blog Details</a></li>
										</ul>
									</div>
								</li>
								<li><a href="contact.html">Contact</a></li>
							</ul>
						</nav>
					</div>
					<div class="col-md-8 col-sm-8 col-5 col-lg-2">
						<ul class="header__sidebar__right d-flex justify-content-end align-items-center">
							<li class="shop_search">
                                <a class="search__active" href="#"></a>
                            </li>
                            <li class="wishlist" id="wishlist">
                                <a class="wishlist_active" href="wishlist.html"><span class="product_qun" id="wishlist_noti"></span></a>
                            </li>
							<li class="shopcart"><a class="cartbox_active" href="#"><span class="product_qun">3</span></a>
								<!-- Start Shopping Cart -->
								<div class="block-minicart minicart__active">
									<div class="minicart-content-wrapper">
										<div class="micart__close">
											<span>close</span>
										</div>
										<div class="items-total d-flex justify-content-between" id="cart_count">
										</div>
										<div class="total_amount text-right">
											<span id="cart_total"></span>
										</div>
										<div class="mini_action checkout">
											<a class="checkout__btn" href="cart.html">Go to Checkout</a>
										</div>
										<div class="single__items">
											<div class="miniproduct" id="mini_cart">
											</div>
										</div>
									</div>
								</div>
								<!-- End Shopping Cart -->
							</li>
							<li class="setting__bar__icon"><a class="setting__active" href="#"></a>
								<div class="searchbar__content setting__block">
									<div class="content-inner">
										<div class="switcher-currency">
											<strong class="label switcher-label">
												<span>Currency</span>
											</strong>
											<div class="switcher-options">
												<div class="switcher-currency-trigger">
													<span class="currency-trigger">USD - US Dollar</span>
													<ul class="switcher-dropdown">
														<li>GBP - British Pound Sterling</li>
														<li>EUR - Euro</li>
													</ul>
												</div>
											</div>
										</div>
										<div class="switcher-currency">
											<strong class="label switcher-label">
												<span>Language</span>
											</strong>
											<div class="switcher-options">
												<div class="switcher-currency-trigger">
													<span class="currency-trigger">English01</span>
													<ul class="switcher-dropdown">
														<li>English02</li>
														<li>English03</li>
														<li>English04</li>
														<li>English05</li>
													</ul>
												</div>
											</div>
										</div>
										<div class="switcher-currency">
											<strong class="label switcher-label">
												<span>Select Store</span>
											</strong>
											<div class="switcher-options">
												<div class="switcher-currency-trigger">
													<span class="currency-trigger">Fashion Store</span>
													<ul class="switcher-dropdown">
														<li>Furniture</li>
														<li>Shoes</li>
														<li>Speaker Store</li>
														<li>Furniture</li>
													</ul>
												</div>
											</div>
										</div>
										<div class="switcher-currency">
											<strong class="label switcher-label">
												<span>My Account</span>
											</strong>
											<div class="switcher-options">
												<div class="switcher-currency-trigger">
													<div class="setting__menu">
														<span><a href="#">Compare Product</a></span>
														<span><a href="#">My Account</a></span>
														<span><a href="#">My Wishlist</a></span>
														<span><a href="#">Sign In</a></span>
														<span><a href="#">Create An Account</a></span>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
				<!-- Start Mobile Menu -->
				<div class="row d-none">
					<div class="col-lg-12 d-none">
						<nav class="mobilemenu__nav">
							<ul class="meninmenu">
								<li><a href="index.html">Home</a></li>
								<li><a href="#">Pages</a>
									<ul>
										<li><a href="about.html">About Page</a></li>
										<li><a href="portfolio.html">Portfolio</a>
											<ul>
												<li><a href="portfolio.html">Portfolio</a></li>
												<li><a href="portfolio-details.html">Portfolio Details</a></li>
											</ul>
										</li>
										<li><a href="my-account.html">My Account</a></li>
										<li><a href="cart.html">Cart Page</a></li>
										<li><a href="checkout.html">Checkout Page</a></li>
										<li><a href="wishlist.html">Wishlist Page</a></li>
										<li><a href="error404.html">404 Page</a></li>
										<li><a href="faq.html">Faq Page</a></li>
										<li><a href="team.html">Team Page</a></li>
									</ul>
								</li>
								<li><a href="shop-grid.html">Shop</a>
									<ul>
										<li><a href="shop-grid.html">Shop Grid</a></li>
										<li><a href="single-product.html">Single Product</a></li>
									</ul>
								</li>
								<li><a href="blog.html">Blog</a>
									<ul>
										<li><a href="blog.html">Blog Page</a></li>
										<li><a href="blog-details.html">Blog Details</a></li>
									</ul>
								</li>
								<li><a href="contact.html">Contact</a></li>
							</ul>
						</nav>
					</div>
				</div>
				<!-- End Mobile Menu -->
	            <div class="mobile-menu d-block d-lg-none">
	            </div>
	            <!-- Mobile Menu -->	
			</div>		
		</header>
		<!-- //Header -->
		<!-- Start Search Popup -->
		<div class="box-search-content search_active block-bg close__top">
			<form id="search_mini_form" class="minisearch" action="#">
				<div class="field__search">
					<input type="text" placeholder="Search entire store here...">
					<div class="action">
						<a href="#"><i class="zmdi zmdi-search"></i></a>
					</div>
				</div>
			</form>
			<div class="close__wrap">
				<span>close</span>
			</div>
		</div>
		<br>
		<br>
		<br>
		<!-- End Search Popup -->
        <!-- Start Bradcaump area -->
        <!--<div class="ht__bradcaump__area bg-image--3">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="bradcaump__inner text-center">
                        	<h2 class="bradcaump-title">Shopping Cart</h2>
                            <nav class="bradcaump-content">
                              <a class="breadcrumb_item" href="index.html">Home</a>
                              <span class="brd-separetor">/</span>
                              <span class="breadcrumb_item active">Shopping Cart</span>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- End Bradcaump area -->
        <!-- cart-main-area start -->
    	<div class="cart-main-area section-padding--lg bg--white">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-sm-12 ol-lg-12">
						<br>
						<div class="checkout-heading">
							<h2 style="text-align:center; font-family:sans-serif; font-weight:100px">Shopping Bag</h2>
						</div>
						<br>
						<br>
						<div class="container-fluid">
							<div class="row">
								<aside class="col-lg-9">
									<div class="card">
										<div class="table-responsive" style="overflow-x: unset;">
											<table class="table table-borderless table-shopping-cart">
												<thead>
													<tr class="small text-uppercase">
														<th scope="col">Product</th>
														<th scope="col" width="120">Quantity</th>
														<th scope="col" width="120">Price</th>
														<th scope="col" width="150">Action</th>
													</tr>
												</thead>
												<tbody id="cart_list">
												</tbody>
											</table>
										</div>
									</div>
								</aside>
								<aside class="col-lg-3">
									<div class="card mb-3">
										<div class="card-body">
											<form>
												<div class="form-group"> <label>Have coupon?</label>
													<div class="input-group"> <input type="text" class="form-control coupon" name="" placeholder="Coupon code" style= "height:32px"> &emsp; <span class="input-group-append"> <button class="btn btn-primary btn-apply coupon">Apply</button> </span> </div>
												</div>
											</form>
										</div>
									</div>
									<div class="card">
										<div class="card-body">
											<dl class="dlist-align">
												<dt>Total price:</dt>
												<dd class="text-right ml-3">$69.97</dd>
											</dl>
											<dl class="dlist-align">
												<dt>Discount:</dt>
												<dd class="text-right text-danger ml-3">- $10.00</dd>
											</dl>
											<dl class="dlist-align">
												<dt>Total:</dt>
												<dd class="text-right text-dark b ml-3"><strong>$59.97</strong></dd>
											</dl>
											<hr> 
											<div class="row d-flex px-3 radio"> <img class="pay" src="https://i.imgur.com/WIAP9Ku.jpg">
												<p class="my-auto">Credit Card</p>
											</div>
											<div class="row d-flex px-3 radio gray"> <img class="pay" src="https://i.imgur.com/OdxcctP.jpg">
												<p class="my-auto">Debit Card</p>
											</div>
											<div class="row d-flex px-3 radio gray mb-3"> <img class="pay" src="https://i.imgur.com/cMk1MtK.jpg">
												<p class="my-auto">PayPal</p>
											</div>
												<a href="#" class="btn btn-out btn-primary btn-square btn-main" data-abc="true"> Checkout </a> 
												<a href="#" class="btn btn-out btn-success btn-square btn-main mt-2" data-abc="true" style = "background-color:darkorange;">Continue Shopping</a>
										</div>
									</div>
								</aside>
							</div>
						</div>
						
						<!-- <form action="#">               
                            <div class="table-content wnro__table table-responsive">
                                <table>
                                    <thead>
                                        <tr class="title-top">
                                            <th class="product-thumbnail">Image</th>
                                            <th class="product-name">Product</th>
                                            <th class="product-price">Price</th>
                                            <th class="product-quantity">Quantity</th>
                                            <th class="product-subtotal">Total</th>
                                            <th class="product-remove">Remove</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="product-thumbnail"><a href="#"><img src="images/product/sm-3/1.jpg" alt="product img"></a></td>
                                            <td class="product-name"><a href="#">Natoque penatibus</a></td>
                                            <td class="product-price"><span class="amount">$165.00</span></td>
                                            <td class="product-quantity"><input type="number" value="1"></td>
                                            <td class="product-subtotal">$165.00</td>
                                            <td class="product-remove"><a href="#">X</a></td>
                                        </tr>
                                        <tr>
                                            <td class="product-thumbnail"><a href="#"><img src="images/product/sm-3/2.jpg" alt="product img"></a></td>
                                            <td class="product-name"><a href="#">Quisque fringilla</a></td>
                                            <td class="product-price"><span class="amount">$50.00</span></td>
                                            <td class="product-quantity"><input type="number" value="1"></td>
                                            <td class="product-subtotal">$50.00</td>
                                            <td class="product-remove"><a href="#">X</a></td>
                                        </tr>
                                        <tr>
                                            <td class="product-thumbnail"><a href="#"><img src="images/product/sm-3/3.jpg" alt="product img"></a></td>
                                            <td class="product-name"><a href="#">Vestibulum suscipit</a></td>
                                            <td class="product-price"><span class="amount">$50.00</span></td>
                                            <td class="product-quantity"><input type="number" value="1"></td>
                                            <td class="product-subtotal">$50.00</td>
                                            <td class="product-remove"><a href="#">X</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </form>  -->
                        <!--<div class="cartbox__btn">
                            <ul class="cart__btn__list d-flex flex-wrap flex-md-nowrap flex-lg-nowrap justify-content-between">
                                <li><a href="#">Coupon Code</a></li>
                                <li><a href="#">Apply Code</a></li>
                                <li><a href="#">Update Cart</a></li>
                                <li><a href="#">Check Out</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 offset-lg-6">
                        <div class="cartbox__total__area">
                            <div class="cartbox-total d-flex justify-content-between">
                                <ul class="cart__total__list">
                                    <li>Cart total</li>
                                    <li>Sub Total</li>
                                </ul>
                                <ul class="cart__total__tk">
                                    <li>$70</li>
                                    <li>$70</li>
                                </ul>
                            </div>
                            <div class="cart__total__amount">
                                <span>Grand Total</span>
                                <span>$140</span>
                            </div>
                        </div>-->
                    </div>
                </div>
            </div>  
        </div>
        <!-- cart-main-area end -->
		<!-- Footer Area -->
		<footer id="wn__footer" class="footer__area bg__cat--8 brown--color">
            <div class="footer-static-top">
               <div class="container">
                  <div class="row">
                        <div class="col-lg-12">
                           <div class="footer__widget footer__menu">
                              <div class="ft__logo">
                                    <a href="index.html">
                                       <img src="images/logo/yellow1.png" alt="logo">
                                    </a>
                                    <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered duskam alteration variations of passages</p>
                                 </div>
                              <div class="footer__content">
                                    <ul class="social__net social__net--2 d-flex justify-content-center">
                                       <li><a href="#"><i class="bi bi-facebook"></i></a></li>
                                       <li><a href="#"><i class="bi bi-google"></i></a></li>
                                       <li><a href="#"><i class="bi bi-twitter"></i></a></li>
                                       <li><a href="#"><i class="bi bi-linkedin"></i></a></li>
                                       <li><a href="#"><i class="bi bi-youtube"></i></a></li>
                                    </ul>
                                    <ul class="mainmenu d-flex justify-content-center">
                                       <li><a href="index.html">Trending</a></li>
                                       <li><a href="index.html">Best Seller</a></li>
                                       <li><a href="index.html">All Product</a></li>
                                       <li><a href="index.html">Wishlist</a></li>
                                       <li><a href="index.html">Blog</a></li>
                                       <li><a href="index.html">Contact</a></li>
                                    </ul>
                              </div>
                           </div>
                        </div>
                  </div>
               </div>
            </div>
      </footer>
		<!-- //Footer Area -->

	</div>
	<!-- //Main wrapper -->

	<!-- JS Files -->
	<script src="js/vendor/jquery-3.2.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/plugins.js"></script>
	<script src="js/active.js"></script>
	<script src="js/sizingChart.js"></script>
	<script>
		var recentCategory = localStorage.getItem('recent_category_cart');
		function productsearch(){ //sends search request to backend for JSON response
            // Create a request variable and assign a new XMLHttpRequest object to it.
            var request = new XMLHttpRequest()
			
			
			if (recentCategory === undefined || recentCategory === null){
				recentCategory = "men";
			};

            // replaces white space
			search_value = "?search=" + document.getElementById("search_bar").value + "&category=" + recentCategory;
			sessionStorage.setItem("search_term", search_value);
            // Open a new connection, using the GET request on the URL endpoint
            var search = 'http://custlrwa.ddns.net:8000/scraped/' + encodeURI(search_value)
               
               request.open('GET', search, true)

            request.onload = function loadHTML(){
               var resultText = request.responseText;
               sessionStorage.setItem("search_result", resultText); 
               sessionStorage.setItem("current_page", 1);
               sessionStorage.removeItem("selectBox");
               getBrandList();
            }
            // Send request
               request.send();
         };

         function getBrandList(){
			var request = new XMLHttpRequest()
            var search_value = sessionStorage.getItem("search_term");
			var search = 'http://custlrwa.ddns.net:8000/scraped/' + encodeURI(search_value) + '&brandlist=true';
            request.open('GET', search, true)

            request.onload = function loadHTML(){
                var resultText = (JSON.parse(request.responseText)).results;
                var i;
                var brands = [];
                for (i=0; i<resultText.length; i++){
                    brands = brands.concat(resultText[i].brand);
                };
                sessionStorage.setItem("brand_list", JSON.stringify(brands));
                window.location.replace("shop-grid-" + recentCategory.toLowerCase() + ".html");
            }
            // Send request
            request.send();
		};
		function openCategory(category, brand){
			// Create a request variable and assign a new XMLHttpRequest object to it.
			var request = new XMLHttpRequest()

			// replaces white space
			search_value = "?category=" + category.toLowerCase() + '&brand=' + brand;
			// Open a new connection, using the GET request on the URL endpoint
			var search = 'http://custlrwa.ddns.net:8000/scraped/' + encodeURI(search_value)
			
			request.open('GET', search, true)

			request.onload = function loadHTML(){
				var resultText = request.responseText;
				sessionStorage.setItem("search_result", resultText);
				sessionStorage.setItem("search_term", search_value);
				recentCategory = category.toLowerCase();
				getBrandList();
			}
			// Send request
			request.send();
		};

		class Cart{
            //constructor(products) {
            constructor(){
               if (!this.storageSupported()){
                  throw "Browser doesn't support localStorage"
               }
               // this.products = products;
               //this.items = JSON.parse(localStorage.getItem('cart'))
            }
            find(id, size, source){
               for(var i = 0; i < source.length; i++){
                  if(source[i].id == id && source[i].size == size){
                     return source[i];
                  }
               }
               return false;
            }
            findSizeIndex(id, source, size){
               for(var i = 0; i < source.length; i++){
                  if(source[i].id == id && source[i].size == size){
                     return i;
                  }
               }
               return false;
            }
            /*
            *Add items to cart
            */         
            add(id, quantity = 1, size, price, name, page, brand, image, category = 'men'){
               //Find product from catalog, build object, add to storage
               if (localStorage.getItem('cart') === undefined || localStorage.getItem('cart') === null || JSON.parse(localStorage.getItem('cart')).length === 0){
                  var item = Object.assign({}, {id: id, quantity: quantity, size: size, price: price, name: name, page: page, brand: brand, image: image, category: category});
                  localStorage.setItem('cart', JSON.stringify([item]))
               }else if(this.find(id, size, JSON.parse(localStorage.getItem('cart'))) != false){
                  //Item already exists in cart, increase quantity
                  var cartObj = JSON.parse(localStorage.getItem('cart'));
                  var oldItem = this.find(id, size, cartObj);
                  var itemIndex = this.findSizeIndex(id, cartObj, size);
                  var newItem = Object.assign({}, oldItem, {quantity: (quantity + oldItem.quantity), size: size, price: price, name: name, page: page, brand: brand, image: image, category: category});
                  cartObj[itemIndex] = newItem;
                  localStorage.setItem('cart', JSON.stringify(cartObj));
               }else{
                  var item = Object.assign({}, {id: id, quantity: quantity, size: size, price: price, name: name, page: page, brand: brand, image: image, category: category});
                  var cartObj =  JSON.parse(localStorage.getItem('cart'));
                  cartObj.push(item)
                  localStorage.setItem('cart', JSON.stringify(cartObj))
               }
            }
            /*
            *Show single item from cart
            */
            show(id){
               return this.find(id, JSON.parse(localStorage.getItem('cart')))
            }
            /*
            *List all items in cart
            */
            all(){
               return  JSON.parse(localStorage.getItem('cart'));
            }
            /*
            *Sum cost of items in cart
            *TODO - get price into object
            */
            sum(){
               var sum = 0;
               var items = JSON.parse(localStorage.getItem('cart'));
               for (var i = 0; i < items.length; i++) {
                  sum += (items[i].price * items[i].quantity)
               }
               return sum;
            }
            /*
            *Remove an item from cart
            */
            remove(id, size){
               
               var items = JSON.parse(localStorage.getItem('cart'));
               var index = this.findSizeIndex(id, items, size)

               if (index >= 0){
                  items.splice(index, 1)
                  localStorage.setItem('cart', JSON.stringify(items));
               }
            }
            /*
            *Update cart item by its quantity
            */
            update(id, quantity, size){
               var cartObj = JSON.parse(localStorage.getItem('cart'));

               var oldItem = this.find(id, size, cartObj)
               var itemIndex = this.findSizeIndex(id, cartObj, size)
               var updatedItem = Object.assign({}, oldItem, {quantity: quantity})
               cartObj[itemIndex] = updatedItem;

               //Save back to storage
               localStorage.setItem('cart', JSON.stringify(cartObj))
            }
            /**
            *Remove all items from cart
            */
            clear(){
               localStorage.removeItem('cart')
            }
            storageSupported(){
               return (typeof(Storage) !== "undefined") ? true : false;
            }
		  };
		
		var wishlist = JSON.parse(localStorage.getItem("wishlist"));
        if (wishlist === undefined || wishlist === null){
            wishlist = [];
            //console.log('empty wishlist');
        };
		function updateBtn(original_site, iter){
			//TODO Update button on click
        };
		function addWishlist(original_site, iter){
            if (wishlist.length === 0){
               //console.log('creating new wishlist');
               //console.log('adding to wishlist');
               wishlist.push(original_site);               
            }
            else if (wishlist.includes(original_site)){
               var removeIndex = wishlist.indexOf(original_site);
               delete wishlist[removeIndex];
               wishlist = wishlist.filter(item => item);               
            }
            else {
               //console.log('adding to wishlist');
               wishlist.push(original_site);
            };
            updateBtn(original_site, iter);
            //console.log(wishlist); 
			localStorage.setItem("recentCategory", cartData[iter].category.toLowerCase());
            localStorage.setItem("wishlist", JSON.stringify(wishlist));
            //console.log('wishlist updated'); 
         };

		var cart = new Cart()
		var cartData = cart.all();
		var cartHTML = '';

		function loadCart(){
			cartData = cart.all();
			if (cartData.length != 0) {
				for (i = 0; i<cartData.length; i++){
				cartHTML += '<tr><td><figure class="itemside align-items-center"><div class="aside"><img src="' + cartData[i].image + '" class="img-sm" onclick="openPage(\'' + cartData[i].page + '\')"></div>';
				cartHTML += '<figcaption class="info"> <a onclick="openPage(\'' + cartData[i].page + '\')" class="title text-dark" data-abc="true"><strong>'+ cartData[i].name +'</strong></a>';
				cartHTML += '<p class="text-muted small">SIZE: '+ cartData[i].size + '</p><p onclick="openCategory(\''+ cartData[i].category +'\', \'' + cartData[i].brand +'\')" style="cursor:pointer;"> Brand: ' + cartData[i].brand + '</p></figcaption></figure></td>';
				cartHTML += '<td class="box-tocart"><input id="qty" class="input-text qty" name="qty" min="1" value="'+ cartData[i].quantity +'" title="Qty" type="number"'
				cartHTML += ' oninput="updateCart(\''+ cartData[i].id + '\', \''+ cartData[i].quantity +'\', \'' + cartData[i].size + '\')"></td>';
				cartHTML += '<td><div class="price-wrap"><var class="price">RM ' + cartData[i].price.toString() + '</var></div></td>';
				cartHTML += '<td class="d-flex justify-content-start"><a data-original-title="Save to Wishlist" title="" onclick="addWishlist(\''+ cartData[i].id + '\', \'' + i +'\')" class="btn btn-light" style="margin-top:100px;" data-toggle="tooltip" data-abc="true">';
				cartHTML += '<i class="fa fa-heart"></i></a><a onclick="removeFromCart(\''+ cartData[i].id + '\', \''+ cartData[i].size +'\')" class="btn btn-remove ml-2" data-abc="true" style="margin-top:100px;background-color:grey">Remove</a></td></tr>';
				};
			}
			else {
				cartHTML = '<tr><td>Cart is empty!<td><td><td></td></td></td></td></tr>'
			}
			document.getElementById("cart_list").innerHTML = cartHTML;
		}
		
		loadCart();

		function updateCart(id, quantity, size){
			cart.update(id, quantity, size);
		}

		function removeFromCart(id, size){
			cart.remove(id, size);
			loadCart();
		}

		if (wishlist.length != 0) {
			document.getElementById("wishlist_noti").innerHTML = wishlist.length;
		}
		else {
			empty += '<a class="wishlist_active" href="wishlist.html"></a>';
			document.getElementById("wishlist").innerHTML = empty;
      	}

		function openPage(id){
            link = 'http://custlrwa.ddns.net:8000/page/' + id.toString() + '/';
            openLink(link, "pageRespData");
        };
		function openLink(url, storage){ //sends search request to backend for JSON response
			// Create a request variable and assign a new XMLHttpRequest object to it.
			var request = new XMLHttpRequest()
            
			// Open a new connection, using the GET request on the URL endpoint
            request.open('GET', url, true)

			request.onload = function loadHTML(){
				var resultText = request.responseText;
				sessionStorage.setItem(storage, resultText);
				var pageCategory = JSON.parse(resultText)
				var page = 'single-product-' + pageCategory.category.toLowerCase() + '.html';
                window.location.replace(page);
			}
			// Send request
			request.send();
		};
	</script>
	<script src="js/cart-mini.js"></script>
</body>
</html>